<section>
    <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
    <mat-card>
        <form (ngSubmit)="onCurrencyBooking(f)" #f="ngForm">
            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
                <mat-form-field appearance="fill">
                    <mat-label>Forex</mat-label>
                    <mat-select ngModel name="currency" [(ngModel)]="orderBook.currencyName" required>
                        <mat-option *ngFor="let currency of currencylist" [value]="currency.currencyDescription">
                            {{currency.currencyName}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <input type="text" matInput placeholder="Currency Rate" ngModel name="currentRate"
                        [(ngModel)]="orderBook.currentRate" required>
                </mat-form-field>
                <mat-form-field>
                    <input type="text" matInput placeholder="Position" ngModel name="position"
                        [(ngModel)]="orderBook.position" required>
                </mat-form-field>
                <mat-form-field>
                    <input type="text" matInput placeholder="Unit" ngModel name="unit" [(ngModel)]="orderBook.unit"
                        required>
                </mat-form-field>

                <mat-form-field>
                    <input type="text" matInput placeholder="Total Amount" ngModel name="totalAmount"
                        [(ngModel)]="orderBook.totalAmount" disabled>
                </mat-form-field>


                <mat-button-toggle-group>
                    <mat-button-toggle value="action-buy"><button mat-raised-button color="accent" id="action-buy"
                            (click)="onOrderActionChange($event)">Buy</button>
                    </mat-button-toggle>
                    <mat-button-toggle value="action-cell"><button mat-raised-button color="warn" id="action-cell"
                            (click)="onOrderActionChange($event)">Sell</button>
                    </mat-button-toggle>
                </mat-button-toggle-group>

            </div>
            <br />
            <div fxLayout="center" fxLayoutAlign="center center">
                <div class="font-weight-bold"
                    [ngClass]="{'text-success': isProfit == true,'text-danger': isProfit == false }"> (Currenct Rate -
                    Postion) * Unit = {{totalAmount}} </div>
            </div>
            <br />
            <mat-card-actions fxLayout="center" fxLayoutAlign="center center">
                <button mat-flat-button color="primary" type="submit">Submit</button>
            </mat-card-actions>
        </form>
    </mat-card>
</section>
<section>
    <mat-card>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>

            <!--- Note that these columns can be defined in any order.
                  The actual rendered columns are set as a property on the row definition" -->
          
            <!-- Position Column -->
            <ng-container matColumnDef="currencyName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Currency Name </th>
              <td mat-cell *matCellDef="let element"> {{element.currencyName}} </td>
            </ng-container>
          
            <!-- Name Column -->
            <ng-container matColumnDef="currentRate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Current Rate </th>
              <td mat-cell *matCellDef="let element"> {{element.currentRate}} </td>
            </ng-container>
          
            <!-- Weight Column -->
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Position </th>
              <td mat-cell *matCellDef="let element"> {{element.position}} </td>
            </ng-container>
          
            <!-- Symbol Column -->
            <ng-container matColumnDef="unit">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Unit </th>
              <td mat-cell *matCellDef="let element"> {{element.unit}} </td>
            </ng-container>

            <ng-container matColumnDef="totalAmount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Amount </th>
                <td mat-cell *matCellDef="let element"> {{element.totalAmount}} </td>
              </ng-container>

              <ng-container matColumnDef="endAction">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Action </th>
                <td mat-cell *matCellDef="let element"> {{element.endAction}} </td>
              </ng-container>

              <ng-container matColumnDef="orderAction">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Order Action </th>
                <td mat-cell *matCellDef="let element"> {{element.orderAction}} </td>
              </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
    </mat-card>
</section>